generator zod {
  provider = "prisma-zod-generator"
  output   = "../shared/zod/generated"
}

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             String   @id @default(cuid())
  email          String   @unique
  username       String   @unique
  password       String
  resetToken     String?  @unique
  resetTokenExp  DateTime?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  profile        Profile?
}

model Profile {
  id               String   @id @default(cuid())
  userId           String   @unique
  publicName       String
  intro            String?
  country          String?
  city             String?
  birthday         DateTime?
  gender           Gender
  relationship     RelationshipStatus
  hasKids          Boolean
  interestTags     String[]
  searchPreference SearchPreference?
  user             User     @relation(fields: [userId], references: [id])
}

model SearchPreference {
  id       String   @id @default(cuid())
  profile  Profile  @relation(fields: [profileId], references: [id])
  profileId String  @unique
  ageMin   Int
  ageMax   Int
  gender   Gender
  goal     Goal
}

enum Gender {
  male
  female
  non_binary
  other
}

enum RelationshipStatus {
  single
  in_relationship
  married
  other
}

enum Goal {
  friends
  relationship
}
